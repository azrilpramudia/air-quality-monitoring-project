generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "mysql"
  url      = env("DATABASE_URL")
}

///////////////////////////////////////////////////////
// ACTUAL SENSOR DATA (REALTIME / RAW DATA)
///////////////////////////////////////////////////////

model Actual {
  id          Int      @id @default(autoincrement())
  ts          DateTime
  deviceId    String

  temperature Float
  humidity    Float
  tvoc        Int
  eco2        Int
  dust        Float
  aqi         Float?

  createdAt   DateTime @default(now())

  @@index([deviceId, ts])
}

///////////////////////////////////////////////////////
// ML PREDICTION (FORECAST-BASED, DECOUPLED)
///////////////////////////////////////////////////////

model Prediction {
  id           Int      @id @default(autoincrement())

  deviceId     String
  timestamp    DateTime        // reference time (latest actual ts)
  generatedAt  DateTime @default(now())

  forecastJson Json            // ðŸ”® array of forecast points
  metaJson     Json?           // model info, feature count, etc

  modelVersion String

  createdAt    DateTime @default(now())

  @@index([deviceId, timestamp])
}
